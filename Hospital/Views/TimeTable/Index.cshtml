@using Microsoft.AspNetCore.Identity
@using System.Security.Claims;
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model IEnumerable<Hospital.Models.TimeTable>
@{
    ViewData["Title"] = "Расписание работы";
}
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <a class="navbar-brand" asp-controller="Home" asp-action="Index">Главная</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar1" aria-controls="navbar1" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbar1">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" asp-controller="TimeTable" asp-action="Index">Расписание врачей<span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item active">

                    <a class="nav-link" asp-controller="Roles" asp-action="Index">Роли</a>
                </li>
                <li class="nav-item active">

                    <a class="nav-link" asp-controller="Specialty" asp-action="Index">Специальности врача</a>
                </li>
                <li class="nav-item active">

                    <a class="nav-link" asp-controller="Users" asp-action="Index">Пользователи</a>
                </li>
                <li class="nav-item active">

                    <a class="nav-link" asp-controller="Doctor" asp-action="Index">Доктора</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown1" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown1">
                        <a class="dropdown-item" href="#">Action</a>
                        <a class="dropdown-item" href="#">Another action</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Something else here</a>
                    </div>
                </li>
            </ul>

        </div>
    </nav>
    <h2>@ViewData["Title"]</h2>

    @if (User.IsInRole("Admin") || User.IsInRole("Doctor"))
    {
        <p><a asp-action="TableCreate" asp-controller="TimeTable">Добавить расписание</a></p>

        <form method="get" asp-action="TableCreate" asp-controller="TimeTable">

            <input type="text" name="Id" value="@Context.User" hidden>
            <input type="submit" value="send" />


        </form>

    }

    @User.Identity.Name
    @User.IsInRole("Admin");
    @User.HasClaim(ClaimTypes.Role, "Admin");
    @User.IsInRole("User");
    @User.IsInRole("Doctor");


    <table class="table" align="center" border="1" cellpadding="4">
        <thead>
            <tr><th>Специальность</th>
            <tr><th>ФИО</th>
            <tr><th>Понедельник</th>
            <tr><th>Вторник</th>
            <tr><th>Среда</th>
            <tr><th>Четверг</th>
            <tr><th>Пятница</th>
        </thead>


        @foreach (var table in Model)
        {
            <tr>
                <td>@table.DoctorId.UserId.FirstName</td>
                <td>@table.DoctorId.UserId.SecondName</td>
                <td>@table.DoctorId.UserId.LastName</td>
            </tr>

            <tr>
                <td>@table.DoctorId.SpecialtyId.Name</td>
            </tr>
            <tr>
                <td>@table.Monday</td>
            </tr>
            <tr>
                <td>@table.Tuesday</td>
            </tr>
            <tr>
                <td>@table.Thirsday</td>
            </tr>
            <tr>
                <td>@table.Wednesday</td>
            </tr>
            <tr>
                <td>@table.Friday</td>
            </tr>
        }
    </table>
</body>