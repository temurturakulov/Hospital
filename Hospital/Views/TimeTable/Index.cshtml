@using Microsoft.AspNetCore.Identity
@using System.Security.Claims;
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@model IEnumerable<Hospital.Models.TimeTable>
@{
    ViewData["Title"] = "Расписание работы";
}

<h2>@ViewData["Title"]</h2>

@if (User.IsInRole("Admin") || User.IsInRole("Doctor"))
{
    <p><a asp-action="TableCreate" asp-controller="TimeTable">Добавить расписание</a></p>

    <form method="get" asp-action="TableCreate" asp-controller="TimeTable">
        @foreach (var table in Model)
        {
            <td>@table.DoctorId.UserId.UserName</td>
        }

    </form>

}

@User.Identity.Name
@User.IsInRole("Admin");
@User.HasClaim(ClaimTypes.Role, "Admin");
@User.IsInRole("User");
@User.IsInRole("Doctor");


<table class="table" align="center" border="1" cellpadding="4">
    <thead>
        <tr><th>Специальность</th>
        <tr><th>ФИО</th>
        <tr><th>Понедельник</th>
        <tr><th>Вторник</th>
        <tr><th>Среда</th>
        <tr><th>Четверг</th>
        <tr><th>Пятница</th>
    </thead>


    @foreach (var table in Model)
    {
        <tr>
            <td>@table.DoctorId.UserId.FirstName</td>
            <td>@table.DoctorId.UserId.SecondName</td>
            <td>@table.DoctorId.UserId.LastName</td>
        </tr>

        <tr>
            <td>@table.DoctorId.SpecialtyId.Name</td>
        </tr>
        <tr>
            <td>@table.Monday</td>
        </tr>
        <tr>
            <td>@table.Tuesday</td>
        </tr>
        <tr>
            <td>@table.Thirsday</td>
        </tr>
        <tr>
            <td>@table.Wednesday</td>
        </tr>
        <tr>
            <td>@table.Friday</td>
        </tr>
    }
</table> 